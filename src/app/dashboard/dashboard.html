<div class="dashboard-container">
  <h2>Bienvenue sur le Dashboard</h2>

  <!-- Formulaire d'ajout de pointage -->
  <form (ngSubmit)="onSubmit()" #entryForm="ngForm">
    <label for="day">Jour :</label>
    <input
      id="day"
      type="date"
      name="day"
      required
      [(ngModel)]="day"
    />

    <label for="startTime">Heure de début :</label>
    <input
      id="startTime"
      type="time"
      name="startTime"
      required
      [(ngModel)]="startTime"
    />

    <label for="endTime">Heure de fin :</label>
    <input
      id="endTime"
      type="time"
      name="endTime"
      required
      [(ngModel)]="endTime"
    />

    <button type="submit">Ajouter</button>
    <div class="error" *ngIf="error">{{ error }}</div>
  </form>

  <!-- Filtre par date -->
  <div style="margin-top: 1rem;">
    <label for="filterDate">Filtrer par date :</label>
    <input
      id="filterDate"
      type="date"
      [(ngModel)]="filterDate"
      (change)="applyDateFilter()"
      name="filterDate"
    />
    <button (click)="resetFilter()">Réinitialiser</button>
  </div>

  <h3>Heures totales : <span>{{ totalSummary?.totalHours ?? 0 }}</span> h</h3>

  <h4>Liste des pointages :</h4>

  <ng-container *ngIf="filteredEntries?.length; else noData">
    <table>
      <thead>
        <tr>
          <th>Date</th>
          <th>Début</th>
          <th>Fin</th>
          <th>Heures travaillées</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let entry of filteredEntries">
          <td>{{ entry.day | date: 'dd/MM/yyyy' }}</td>
          <td>{{ entry.startTime }}</td>
          <td>{{ entry.endTime }}</td>
          <td>{{ formatHours(entry.hoursWorked) }}</td>
        </tr>
      </tbody>
    </table>
  </ng-container>

  <ng-template #noData>
    <p>Aucun pointage pour le moment.</p>
  </ng-template>
</div>
